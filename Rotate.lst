mads 2.0.6 build 58 (28 Jan 17)
Source: C:\jac\wudsn\Workspace\Atari800\Rotate\Rotate.asm
     1 					org $80
     2 				;
     3 = 0080			LO	.ds 1
     4 = 0081			HI	.ds 1
     5 = 0082			PLOTX	.ds 1
     6 = 0083			PLOTY	.ds 1
     7 = 0084			YOFSET	.ds 1
     8 = 0085			HOLD	.ds 1
     9 = 0086			DRAWX	.ds 1
    10 = 0087			DRAWY	.ds 1
    11 = 0088			ACCX	.ds 1
    12 = 0089			ACCY	.ds 1
    13 = 008A			DELTAX	.ds 1
    14 = 008B			DELTAY	.ds 1
    15 = 008C			INCX	.ds 1
    16 = 008D			INCY	.ds 1
    17 = 008E			COUNTR	.ds 1
    18 = 008F			ENDPT	.ds 1
    19 = 0090			LOHLD	.ds 1
    20 = 0091			HIHLD	.ds 1
    21 = 0092			THETA	.ds 1
    22 = 0093			SCREEN	.ds 2
    23 = 0095			PASSV	.ds 2
    24 = 0097			ACTIVE	.ds 1
    25
    26 = 02C4			COLPF0	= $02C4
    27 = 02C6			COLPF2	= $02C6
    28 = 0050			COLOR	= $50
    29
    30 				; DISPLAY LOCATION
    31 = 4010			DISP1	= $4010
    32 = 5000			DISP1A	= DISP1+$0FF0
    33 = 6010			DISP2	= $6010
    34 = 7000			DISP2A	= DISP2+$0FF0
    35
    36 				;
    37 				; DISPLAY LIST
    38 				;
    39 				; DISPLAY LIST LOCATION
    40 				;
    41 					org $2000
    42 				;
    43 FFFF> 2000-2146> 70 70 + DLIST	.byte $70,$70,$70,$4E
    44 2004 10 40		DLOC	.word DISP1
    45 2006 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    46 200E 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    47 2016 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    48 201E 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    49 2026 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    50 202E 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    51 2036 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    52 203E 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    53 2046 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    54 204E 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    55 2056 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    56 205E 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    57 2066 0E 0E 0E 0E 0E		.byte $0E,$0E,$0E,$0E,$0E
    58 206B 4E				.byte $4E
    59 206C 00 50		DLOC1	.word DISP1A
    60 206E 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    61 2076 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    62 207E 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    63 2086 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    64 208E 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    65 2096 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    66 209E 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    67 20A6 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    68 20AE 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    69 20B6 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    70 20BE 0E 0E 0E 0E 0E 0E + 	.byte $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
    71 20C6 0E 0E 0E 41			.byte $0E,$0E,$0E,$41
    72 20CA 00 20			.word DLIST
    73
    74 				; Sine and Cosine tables
    75
    76 20CC 7F 7F 7D 79 75 6F + COSINE	.byte 127,127,125,121,117,111,103,95,86,75,64,52,40,27,13,0
    77 20DC F3 E5 D8 CC C0 B5 + 	.byte -13,-27,-40,-52,-64,-75,-86,-95,-103,-111,-117,-122,-125,-127,-128,-127
    78 20EC 83 86 8B 91 99 A1 + 	.byte -125,-122,-117,-111,-103,-95,-86,-75,-64,-52,-40,-27,-13,0,13,27
    79 20FC 28 34 40 4B 56 5F + 	.byte 40,52,64,75,86,95,104,111,117,122,125,127,127
    80 				    
    81 2109 00 0D 1B 28 34 40 + SINE	.byte 0,13,27,40,52,64,75,86,95,104,111
    82 2114 75 7A 7D 7F 7F 7F + 	.byte 117,122,125,127,127,127,125,122,117,111,104,95,86,75,64,52,40,27
    83 2126 0D 00 F3 E5 D8 CC + 	.byte 13,0,-13,-27,-40,-52,-64,-74,-86,-95,-104,-111,-117,-122,-125,-127
    84 2136 80 81 81 83 86 8B + 	.byte -128,-127,-127,-125,-122,-117,-111,-104,-95,-86,-75,-64,-52,-40,-27,-13,0
    85
    86 				;
    87
    88 = 2147			TEMPX	.ds 100
    89 = 21AB			TEMPY	.ds 100
    90 = 220F			RX	.ds 100
    91 = 2273			RY	.ds 100
    92 = 22D7			RZ	.ds 100
    93
    94 233B-238F> 15		NUMPTS	.BYTE 21
    95 233C 14 14 EC EC 14 14 + DX	.BYTE 20,20,-20,-20,20,20,20,20,-20,-20,-20,-20,-20,20,-20,20,10,-10,-10,-10,10
    96 2351 14 14 14 14 14 EC + DY	.BYTE 20,20,20,20,20,-20,-20,20,20,-20,-20,20,-20,-20,-20,-20,-10,-10,10,0,0
    97 2366 14 EC EC 14 14 14 + DZ	.BYTE 20,-20,-20,20,20,20,-20,-20,-20,-20,20,20,20,20,-20,-20,20,20,20,20,20
    98 237B 30 24 24 24 24 24 + TYPE	.BYTE "PDDDDDDDPDDDPDPDPDDPD"
    99
   100
   101 2390				ORG  $3000
   102 3000-3111> D8		START	CLD 
   103 3001 A9 00			LDA #0
   104 3003 8D 0E D4			STA $D40E
   105 3006 8D C6 02			STA COLPF2
   106 3009 8D 12 31			STA YTHETA
   107 300C 8D 13 31			STA PTHETA
   108 300F 8D 14 31			STA RTHETA
   109 3012 8D 15 31			STA YFLAG
   110 3015 8D 16 31			STA PFLAG
   111 3018 8D 17 31			STA RFLAG
   112 301B A9 00			LDA # <DLIST
   113 301D 8D 30 02			STA $0230
   114 3020 A9 20			LDA # >DLIST
   115 3022 8D 31 02			STA $0231
   116 3025 A9 40			LDA #$40
   117 3027 8D 0E D4			STA $D40E
   118 302A A9 0D			LDA #13
   119 302C 8D C4 02			STA COLPF0
   120 302F A9 01			LDA #1
   121 3031 85 97			STA ACTIVE
   122 3033 A9 10			LDA # <DISP1
   123 3035 85 93			STA SCREEN
   124 3037 A9 40			LDA # >DISP1
   125 3039 85 94			STA SCREEN+1
   126 303B 20 E3 34			JSR CLS
   127 303E A9 10			LDA # <DISP2
   128 3040 85 93			STA SCREEN
   129 3042 85 95			STA PASSV
   130 3044 A9 60			LDA # >DISP2
   131 3046 85 94			STA SCREEN+1
   132 3048 85 96			STA PASSV+1
   133 304A 20 E3 34			JSR CLS
   134 304D A0 00			LDY #0
   135 304F A9 01			LDA #1
   136 3051 85 50			STA COLOR
   137 3053 20 F3 30		MAIN	JSR INITR
   138 3056 AD FC 02			LDA CH
   139 3059 C9 FF			CMP #$FF
   140 305B D0 03			BNE CHKY
   141 305D 4C 8A 30			JMP DNCHK
   142 3060 C9 2B		CHKY	CMP #43    ; Y INTERNAL
   143 3062 D0 0B			BNE CHKP
   144 3064 A9 FF			LDA #$FF
   145 3066 4D 15 31			EOR YFLAG
   146 3069 8D 15 31			STA YFLAG
   147 306C 4C 8A 30			JMP DNCHK
   148 306F C9 0A		CHKP	CMP #10    ; P INTERNAL
   149 3071 D0 0B			BNE CHKR
   150 3073 A9 FF			LDA #$FF
   151 3075 4D 16 31			EOR PFLAG
   152 3078 8D 16 31			STA PFLAG
   153 307B 4C 8A 30			JMP DNCHK
   154 307E C9 28		CHKR	CMP #40    ; R INTERNAL
   155 3080 D0 08			BNE DNCHK
   156 3082 A9 FF			LDA #$FF
   157 3084 4D 17 31			EOR RFLAG
   158 3087 8D 17 31			STA RFLAG
   159 308A AD 15 31		DNCHK	LDA YFLAG
   160 308D F0 0F			BEQ DOPITCH
   161 308F EE 12 31			INC YTHETA
   162 3092 AD 12 31			LDA YTHETA
   163 3095 C9 3C			CMP #60
   164 3097 D0 05			BNE DOPITCH
   165 3099 A9 00			LDA #0
   166 309B 8D 12 31			STA YTHETA
   167 309E AD 16 31		DOPITCH	LDA PFLAG
   168 30A1 F0 0F			BEQ DOROLL
   169 30A3 EE 13 31			INC PTHETA
   170 30A6 AD 13 31			LDA PTHETA
   171 30A9 C9 3C			CMP #60
   172 30AB D0 05			BNE DOROLL
   173 30AD A9 00			LDA #0
   174 30AF 8D 13 31			STA PTHETA
   175 30B2 AD 17 31		DOROLL	LDA RFLAG
   176 30B5 F0 0F			BEQ DONEROT
   177 30B7 EE 14 31			INC RTHETA
   178 30BA AD 14 31			LDA RTHETA
   179 30BD C9 3C			CMP #60
   180 30BF D0 05			BNE DONEROT
   181 30C1 A9 00			LDA #0
   182 30C3 8D 14 31			STA RTHETA
   183 30C6 A9 FF		DONEROT	LDA #255
   184 30C8 8D FC 02			STA CH
   185 30CB 20 5A 32			JSR YAW
   186 30CE 20 B9 31			JSR PITCH
   187 30D1 20 18 31			JSR ROLL
   188 30D4 20 7E 34			JSR TRANS
   189 30D7 A0 00			LDY #0
   190 30D9 20 93 33		LPP	JSR PICT
   191 30DC C8				INY 
   192 30DD CC 3B 23			CPY NUMPTS
   193 30E0 D0 F7			BNE LPP
   194 30E2 20 2E 34			JSR SWITCH
   195 30E5 A5 95			LDA PASSV
   196 30E7 85 93			STA SCREEN
   197 30E9 A5 96			LDA PASSV+1
   198 30EB 85 94			STA SCREEN+1
   199 30ED 20 E3 34			JSR CLS
   200 30F0 4C 53 30		MEND	JMP MAIN
   201 30F3 98			INITR	TYA 
   202 30F4 48				PHA 
   203 30F5 A0 00			LDY #0
   204 30F7 B9 3C 23		IRLP	LDA DX,Y
   205 30FA 99 0F 22			STA RX,Y
   206 30FD B9 51 23			LDA DY,Y
   207 3100 99 73 22			STA RY,Y
   208 3103 B9 66 23			LDA DZ,Y
   209 3106 99 D7 22			STA RZ,Y
   210 3109 C8				INY 
   211 310A CC 3B 23			CPY NUMPTS
   212 310D D0 E8			BNE IRLP
   213 310F 68				PLA 
   214 3110 A8				TAY 
   215 3111 60				RTS
   216 					
   217 = 02FC			CH  =   $02FC
   218
   219 = 3112			YTHETA	.ds 1
   220 = 3113			PTHETA	.ds 1
   221 = 3114			RTHETA	.ds 1
   222 = 3115			YFLAG	.ds 1
   223 = 3116			PFLAG	.ds 1
   224 = 3117			RFLAG	.ds 1
   225
   226 3118-32FA> AD 14 31	ROLL	LDA RTHETA
   227 311B AA				TAX
   228 311C A0 00			LDY #0
   229 311E B9 0F 22		RLP	LDA RX,Y
   230 3121 8D FB 32			STA ORX
   231 3124 B9 73 22			LDA RY,Y
   232 3127 8D FC 32			STA ORY
   233 312A B9 D7 22			LDA RZ,Y
   234 312D 8D FD 32			STA ORZ
   235 3130 BD CC 20			LDA COSINE,X
   236 3133 8D 5B 35			STA MP
   237 3136 AD FB 32			LDA ORX
   238 3139 8D 5C 35			STA MC
   239 313C 20 F8 34			JSR MULT
   240 313F 0E 59 35			ASL LOW
   241 3142 2E 5A 35			ROL HIGH
   242 3145 AD 5A 35			LDA HIGH
   243 3148 99 0F 22			STA RX,Y
   244 314B BD 09 21			LDA SINE,X
   245 314E 8D 5B 35			STA MP
   246 3151 AD FC 32			LDA ORY
   247 3154 8D 5C 35			STA MC
   248 3157 20 F8 34			JSR MULT
   249 315A 0E 59 35			ASL LOW
   250 315D 2E 5A 35			ROL HIGH
   251 3160 AD 5A 35			LDA HIGH
   252 3163 18				CLC 
   253 3164 79 0F 22			ADC RX,Y
   254 3167 99 0F 22			STA RX,Y
   255 				;  NOW RY
   256 316A BD CC 20			LDA COSINE,X
   257 316D 8D 5B 35			STA MP
   258 3170 AD FC 32			LDA ORY
   259 3173 8D 5C 35			STA MC
   260 3176 20 F8 34			JSR MULT
   261 3179 0E 59 35			ASL LOW
   262 317C 2E 5A 35			ROL HIGH
   263 317F AD 5A 35			LDA HIGH
   264 3182 99 73 22			STA RY,Y
   265 3185 BD 09 21			LDA SINE,X
   266 3188 8D 5B 35			STA MP
   267 318B AD FB 32			LDA ORX
   268 318E 8D 5C 35			STA MC
   269 3191 20 F8 34			JSR MULT
   270 3194 0E 59 35			ASL LOW
   271 3197 2E 5A 35			ROL HIGH
   272 319A AD 5A 35			LDA HIGH
   273 319D 49 FF			EOR #$FF
   274 319F 18				CLC 
   275 31A0 69 01			ADC #1
   276 31A2 18				CLC 
   277 31A3 79 73 22			ADC RY,Y
   278 31A6 99 73 22			STA RY,Y
   279 31A9 AD FD 32			LDA ORZ
   280 31AC 99 D7 22			STA RZ,Y
   281 31AF C8				INY 
   282 31B0 CC 3B 23			CPY NUMPTS
   283 31B3 F0 03			BEQ RF
   284 31B5 4C 1E 31			JMP RLP
   285 31B8 60			RF	RTS
   286
   287 31B9 AD 13 31		PITCH	LDA PTHETA
   288 31BC AA				TAX 
   289 31BD A0 00			LDY #0
   290 31BF B9 0F 22		PLP	LDA RX,Y
   291 31C2 8D FB 32			STA ORX
   292 31C5 B9 73 22			LDA RY,Y
   293 31C8 8D FC 32			STA ORY
   294 31CB B9 D7 22			LDA RZ,Y
   295 31CE 8D FD 32			STA ORZ
   296 31D1 BD CC 20			LDA COSINE,X
   297 31D4 8D 5B 35			STA MP
   298 31D7 AD FD 32			LDA ORZ
   299 31DA 8D 5C 35			STA MC
   300 31DD 20 F8 34			JSR MULT
   301 31E0 0E 59 35			ASL LOW
   302 31E3 2E 5A 35			ROL HIGH
   303 31E6 AD 5A 35			LDA HIGH
   304 31E9 99 D7 22			STA RZ,Y
   305 31EC BD 09 21			LDA SINE,X
   306 31EF 8D 5B 35			STA MP
   307 31F2 AD FC 32			LDA ORY
   308 31F5 8D 5C 35			STA MC
   309 31F8 20 F8 34			JSR MULT
   310 31FB 0E 59 35			ASL LOW
   311 31FE 2E 5A 35			ROL HIGH
   312 3201 AD 5A 35			LDA HIGH
   313 3204 18				CLC 
   314 3205 79 D7 22			ADC RZ,Y
   315 3208 99 D7 22			STA RZ,Y
   316 				; NOW RY
   317 320B BD CC 20			LDA COSINE,X
   318 320E 8D 5B 35			STA MP
   319 3211 AD FC 32			LDA ORY
   320 3214 8D 5C 35			STA MC
   321 3217 20 F8 34			JSR MULT
   322 321A 0E 59 35			ASL LOW
   323 321D 2E 5A 35			ROL HIGH
   324 3220 AD 5A 35			LDA HIGH
   325 3223 99 73 22			STA RY,Y
   326 3226 BD 09 21			LDA SINE,X
   327 3229 8D 5B 35			STA MP
   328 322C AD FD 32			LDA ORZ
   329 322F 8D 5C 35			STA MC
   330 3232 20 F8 34			JSR MULT
   331 3235 0E 59 35			ASL LOW
   332 3238 2E 5A 35			ROL HIGH
   333 323B AD 5A 35			LDA HIGH
   334 323E 49 FF			EOR #$FF
   335 3240 18				CLC 
   336 3241 69 01			ADC #1
   337 3243 18				CLC 
   338 3244 79 73 22			ADC RY,Y
   339 3247 99 73 22			STA RY,Y
   340 324A AD FB 32			LDA ORX
   341 324D 99 0F 22			STA RX,Y
   342 3250 C8				INY 
   343 3251 CC 3B 23			CPY NUMPTS
   344 3254 F0 03			BEQ PF
   345 3256 4C BF 31			JMP PLP
   346 3259 60			PF	RTS 
   347
   348 325A AD 12 31		YAW	LDA YTHETA
   349 325D AA				TAX 
   350 325E A0 00			LDY #0
   351 3260 B9 0F 22		YLP	LDA RX,Y
   352 3263 8D FB 32			STA ORX
   353 3266 B9 73 22			LDA RY,Y
   354 3269 8D FC 32			STA ORY
   355 326C B9 D7 22			LDA RZ,Y
   356 326F 8D FD 32			STA ORZ
   357 3272 BD CC 20			LDA COSINE,X
   358 3275 8D 5B 35			STA MP
   359 3278 AD FB 32			LDA ORX
   360 327B 8D 5C 35			STA MC
   361 327E 20 F8 34			JSR MULT
   362 3281 0E 59 35			ASL LOW
   363 3284 2E 5A 35			ROL HIGH
   364 3287 AD 5A 35			LDA HIGH
   365 328A 99 0F 22			STA RX,Y
   366 328D BD 09 21			LDA SINE,X
   367 3290 8D 5B 35			STA MP
   368 3293 AD FD 32			LDA ORZ
   369 3296 8D 5C 35			STA MC
   370 3299 20 F8 34			JSR MULT
   371 329C 0E 59 35			ASL LOW
   372 329F 2E 5A 35			ROL HIGH
   373 32A2 AD 5A 35			LDA HIGH
   374 32A5 18				CLC 
   375 32A6 79 0F 22			ADC RX,Y
   376 32A9 99 0F 22			STA RX,Y
   377 				; NOW RZ
   378 32AC BD CC 20			LDA COSINE,X
   379 32AF 8D 5B 35			STA MP
   380 32B2 AD FD 32			LDA ORZ
   381 32B5 8D 5C 35			STA MC
   382 32B8 20 F8 34			JSR MULT
   383 32BB 0E 59 35			ASL LOW
   384 32BE 2E 5A 35			ROL HIGH
   385 32C1 AD 5A 35			LDA HIGH
   386 32C4 99 D7 22			STA RZ,Y
   387 32C7 BD 09 21			LDA SINE,X
   388 32CA 8D 5B 35			STA MP
   389 32CD AD FB 32			LDA ORX
   390 32D0 8D 5C 35			STA MC
   391 32D3 20 F8 34			JSR MULT
   392 32D6 0E 59 35			ASL LOW
   393 32D9 2E 5A 35			ROL HIGH
   394 32DC AD 5A 35			LDA HIGH
   395 32DF 49 FF			EOR #$FF
   396 32E1 18				CLC 
   397 32E2 69 01			ADC #1
   398 32E4 18				CLC 
   399 32E5 79 D7 22			ADC RZ,Y
   400 32E8 99 D7 22			STA RZ,Y
   401 32EB AD FC 32			LDA ORY
   402 32EE 99 73 22			STA RY,Y
   403 32F1 C8				INY 
   404 32F2 CC 3B 23			CPY NUMPTS
   405 32F5 F0 03			BEQ YF
   406 32F7 4C 60 32			JMP YLP
   407 32FA 60			YF	RTS
   408
   409 = 32FB			ORX	.ds 1
   410 = 32FC			ORY	.ds 1
   411 = 32FD			ORZ	.ds 1
   412
   413 32FE-3558> A5 87		DRAW	LDA DRAWY
   414 3300 C5 83			CMP PLOTY
   415 3302 90 0B			BCC YMINUS
   416 3304 38				SEC 
   417 3305 E5 83			SBC PLOTY
   418 3307 85 8B			STA DELTAY
   419 3309 A9 01			LDA #1
   420 330B 85 8D			STA INCY
   421 330D D0 0B			BNE XVEC
   422 330F A5 83		YMINUS	LDA PLOTY
   423 3311 38				SEC 
   424 3312 E5 87			SBC DRAWY
   425 3314 85 8B			STA DELTAY
   426 3316 A9 FF			LDA #255
   427 3318 85 8D			STA INCY
   428 331A A5 86		XVEC	LDA DRAWX
   429 331C C5 82			CMP PLOTX
   430 331E 90 0B			BCC XMINUS
   431 3320 38				SEC 
   432 3321 E5 82			SBC PLOTX
   433 3323 85 8A			STA DELTAX
   434 3325 A9 01			LDA #1
   435 3327 85 8C			STA INCX
   436 3329 D0 0B			BNE VECSET
   437 332B A5 82		XMINUS	LDA PLOTX
   438 332D 38				SEC 
   439 332E E5 86			SBC DRAWX
   440 3330 85 8A			STA DELTAX
   441 3332 A9 FF			LDA #255
   442 3334 85 8C			STA INCX
   443 3336 A9 00		VECSET	LDA #0
   444 3338 85 89			STA ACCY
   445 333A 85 88			STA ACCX
   446 333C A5 8A			LDA DELTAX
   447 333E C5 8B			CMP DELTAY
   448 3340 90 0A			BCC YMAX
   449 3342 85 8E			STA COUNTR
   450 3344 85 8F			STA ENDPT
   451 3346 4A				LSR
   452 3347 85 89			STA ACCY
   453 3349 4C 55 33			JMP DRAWGO
   454 334C A5 8B		YMAX	LDA DELTAY
   455 334E 85 8E			STA COUNTR
   456 3350 85 8F			STA ENDPT
   457 3352 4A				LSR
   458 3353 85 88			STA ACCX
   459 3355 A5 8E		DRAWGO	LDA COUNTR
   460 3357 F0 39			BEQ DRWEND
   461 3359 A5 89		BEGIN	LDA ACCY
   462 335B 18				CLC 
   463 335C 65 8B			ADC DELTAY
   464 335E 85 89			STA ACCY
   465 3360 C5 8F			CMP ENDPT
   466 3362 90 0E			BCC BEGIN2
   467 3364 A5 89			LDA ACCY
   468 3366 38				SEC 
   469 3367 E5 8F			SBC ENDPT
   470 3369 85 89			STA ACCY
   471 336B A5 83			LDA PLOTY
   472 336D 18				CLC 
   473 336E 65 8D			ADC INCY
   474 3370 85 83			STA PLOTY
   475 3372 A5 88		BEGIN2	LDA ACCX
   476 3374 18				CLC 
   477 3375 65 8A			ADC DELTAX
   478 3377 85 88			STA ACCX
   479 3379 C5 8F			CMP ENDPT
   480 337B 90 0E			BCC PLOTIT
   481 337D A5 88			LDA ACCX
   482 337F 38				SEC 
   483 3380 E5 8F			SBC ENDPT
   484 3382 85 88			STA ACCX
   485 3384 A5 82			LDA PLOTX
   486 3386 18				CLC 
   487 3387 65 8C			ADC INCX
   488 3389 85 82			STA PLOTX
   489 338B 20 C0 33		PLOTIT	JSR PLOT
   490 338E C6 8E			DEC COUNTR
   491 3390 D0 C7			BNE BEGIN
   492 3392 60			DRWEND	RTS
   493
   494 3393 98			PICT	TYA 
   495 3394 48				PHA 
   496 3395 8A				TXA 
   497 3396 48				PHA 
   498 3397 B9 47 21			LDA TEMPX,Y
   499 339A 48				PHA         ; TEMPX ON STACK
   500 339B B9 AB 21			LDA TEMPY,Y
   501 339E 48				PHA         ; TEMPY ON STACK
   502 339F B9 7B 23			LDA TYPE,Y
   503 33A2 C9 24			CMP #"D"
   504 33A4 F0 0C			BEQ ISDRAW
   505 33A6 68				PLA 
   506 33A7 85 83			STA PLOTY
   507 33A9 68				PLA 
   508 33AA 85 82			STA PLOTX
   509 33AC 20 C0 33			JSR PLOT
   510 33AF 4C BB 33			JMP EPICT
   511 33B2 68			ISDRAW	PLA 
   512 33B3 85 87			STA DRAWY
   513 33B5 68				PLA 
   514 33B6 85 86			STA DRAWX
   515 33B8 20 FE 32			JSR DRAW
   516 33BB 68			EPICT	PLA 
   517 33BC AA				TAX 
   518 33BD 68				PLA 
   519 33BE A8				TAY 
   520 33BF 60				RTS
   521
   522 33C0 A5 83		PLOT	LDA PLOTY
   523 33C2 0A				ASL
   524 33C3 85 80			STA LO
   525 33C5 A9 00			LDA #0
   526 33C7 2A				ROL
   527 33C8 85 81			STA HI
   528 33CA 06 80			ASL LO
   529 33CC 26 81			ROL HI
   530 33CE 06 80			ASL LO
   531 33D0 A5 80			LDA LO
   532 33D2 85 90			STA LOHLD
   533 33D4 26 81			ROL HI
   534 33D6 A5 81			LDA HI
   535 33D8 85 91			STA HIHLD
   536 33DA 06 80			ASL LO
   537 33DC 26 81			ROL HI
   538 33DE 06 80			ASL LO
   539 33E0 26 81			ROL HI
   540 33E2 A5 80			LDA LO
   541 33E4 18				CLC 
   542 33E5 65 90			ADC LOHLD
   543 33E7 85 80			STA LO
   544 33E9 A5 81			LDA HI
   545 33EB 65 91			ADC HIHLD
   546 33ED 85 81			STA HI
   547 33EF A5 95			LDA PASSV
   548 33F1 18				CLC 
   549 33F2 65 80			ADC LO
   550 33F4 85 80			STA LO
   551 33F6 A5 96			LDA PASSV+1
   552 33F8 65 81			ADC HI
   553 33FA 85 81			STA HI
   554 33FC A5 82			LDA PLOTX
   555 33FE 29 03			AND #3
   556 3400 AA				TAX 
   557 3401 A5 82			LDA PLOTX
   558 3403 4A				LSR
   559 3404 4A				LSR
   560 3405 85 84			STA YOFSET
   561 3407 A8				TAY 
   562 3408 A4 50			LDY COLOR
   563 340A BD 26 34			LDA BMASK2,X
   564 340D 39 1E 34			AND COLORS,Y
   565 3410 85 85			STA HOLD
   566 3412 BD 22 34			LDA BMASK1,X
   567 3415 A4 84			LDY YOFSET
   568 3417 31 80			AND (LO),Y
   569 3419 05 85			ORA HOLD
   570 341B 91 80			STA (LO),Y
   571 341D 60			PABORT	RTS
   572
   573 341E 00 55 AA FF		COLORS .BYTE $00,$55,$AA,$FF
   574 3422 3F CF F3 FC		BMASK1 .BYTE $3F,$CF,$F3,$FC
   575 3426 C0 30 0C 03		BMASK2 .BYTE $C0,$30,$0C,$03
   576 342A 40 10 04 01		COLOR1 .BYTE $40,$10,$04,$01
   577
   578 342E A9 00		SWITCH	LDA #0
   579 3430 8D 0E D4			STA $D40E
   580 3433 A5 97			LDA ACTIVE
   581 3435 C9 01			CMP #1
   582 3437 D0 21			BNE TWO
   583 3439 E6 97			INC ACTIVE
   584 343B A9 10			LDA # <DISP2
   585 343D 8D 04 20			STA DLOC
   586 3440 A9 60			LDA # >DISP2
   587 3442 8D 05 20			STA DLOC+1
   588 3445 A9 00			LDA # <DISP2A
   589 3447 8D 6C 20			STA DLOC1
   590 344A A9 70			LDA # >DISP2A
   591 344C 8D 6D 20			STA DLOC1+1
   592 344F A9 10			LDA # <DISP1
   593 3451 85 95			STA PASSV
   594 3453 A9 40			LDA # >DISP1
   595 3455 85 96			STA PASSV+1
   596 3457 4C 78 34			JMP SDONE
   597 345A C6 97		TWO	DEC ACTIVE
   598 345C A9 10			LDA # <DISP1
   599 345E 8D 04 20			STA DLOC
   600 3461 A9 40			LDA # >DISP1
   601 3463 8D 05 20			STA DLOC+1
   602 3466 A9 00			LDA # <DISP1A
   603 3468 8D 6C 20			STA DLOC1
   604 346B A9 50			LDA # >DISP1A
   605 346D 8D 6D 20			STA DLOC1+1
   606 3470 A9 10			LDA # <DISP2
   607 3472 85 95			STA PASSV
   608 3474 A9 60			LDA # >DISP2
   609 3476 85 96			STA PASSV+1
   610 3478 A9 40		SDONE	LDA #$40
   611 347A 8D 0E D4			STA $D40E
   612 347D 60				RTS 
   613
   614 = 005A			SIN   =   90
   615 347E A0 00		TRANS	LDY #0
   616 3480 B9 0F 22		TLP	LDA RX,Y
   617 3483 8D 5C 35			STA MC
   618 3486 A9 5A			LDA #90
   619 3488 8D 5B 35			STA MP
   620 348B 20 F8 34			JSR MULT
   621 348E A9 5A			LDA #90
   622 3490 38				SEC 
   623 3491 F9 D7 22			SBC RZ,Y
   624 3494 8D C7 35			STA DVSOR
   625 3497 20 5E 35			JSR DIV
   626 349A AD C8 35			LDA QUOT
   627 349D 18				CLC 
   628 349E 69 46			ADC #70
   629 34A0 99 47 21			STA TEMPX,Y
   630 34A3 B9 73 22			LDA RY,Y
   631 34A6 8D 5C 35			STA MC
   632 34A9 A9 5A			LDA #90
   633 34AB 8D 5B 35			STA MP
   634 34AE 20 F8 34			JSR MULT
   635 34B1 A9 5A			LDA #90
   636 34B3 38				SEC 
   637 34B4 F9 D7 22			SBC RZ,Y
   638 34B7 8D C7 35			STA DVSOR
   639 34BA 20 5E 35			JSR DIV
   640 34BD AD C8 35			LDA QUOT
   641 34C0 8D 5C 35			STA MC
   642 34C3 A9 08			LDA #8
   643 34C5 8D 5B 35			STA MP
   644 34C8 20 F8 34			JSR MULT
   645 34CB A9 05			LDA #5
   646 34CD 8D C7 35			STA DVSOR
   647 34D0 20 5E 35			JSR DIV
   648 34D3 AD C8 35			LDA QUOT
   649 34D6 18				CLC 
   650 34D7 69 46			ADC #70
   651 34D9 99 AB 21			STA TEMPY,Y
   652 34DC C8				INY 
   653 34DD CC 3B 23			CPY NUMPTS
   654 34E0 D0 9E			BNE TLP
   655 34E2 60				RTS 
   656
   657
   658 34E3 98			CLS	TYA 
   659 34E4 48				PHA 
   660 34E5 A2 1E			LDX #30
   661 34E7 A0 00		CLOOP1	LDY #0
   662 34E9 A9 00			LDA #0
   663 34EB 91 93		CLOOP2	STA (SCREEN),Y
   664 34ED C8				INY 
   665 34EE D0 FB			BNE CLOOP2
   666 34F0 E6 94			INC SCREEN+1
   667 34F2 CA				DEX 
   668 34F3 D0 F2			BNE CLOOP1
   669 34F5 68				PLA 
   670 34F6 A8				TAY 
   671 34F7 60				RTS 
   672
   673 34F8 8A			MULT	TXA 
   674 34F9 48				PHA 
   675 34FA AD 5B 35			LDA MP
   676 34FD 4D 5C 35			EOR MC
   677 3500 8D 5D 35			STA MINUS
   678 3503 AD 5B 35			LDA MP
   679 3506 10 08			BPL CMC
   680 3508 49 FF			EOR #$FF
   681 350A 18				CLC 
   682 350B 69 01			ADC #1
   683 350D 8D 5B 35			STA MP
   684 3510 AD 5C 35		CMC LDA MC
   685 3513 10 08			BPL GOMULT
   686 3515 49 FF			EOR #$FF
   687 3517 18				CLC 
   688 3518 69 01			ADC #1
   689 351A 8D 5C 35			STA MC
   690 351D A9 00		GOMULT	LDA #0
   691 351F 8D 5A 35			STA HIGH
   692 3522 A2 08			LDX #8
   693 3524 0A			SHIFT	ASL
   694 3525 2E 5A 35			ROL HIGH
   695 3528 0E 5B 35			ASL MP
   696 352B 90 09			BCC CHCNT
   697 352D 18				CLC 
   698 352E 6D 5C 35			ADC MC
   699 3531 90 03			BCC CHCNT
   700 3533 EE 5A 35			INC HIGH
   701 3536 CA			CHCNT 	DEX 
   702 3537 D0 EB			BNE SHIFT
   703 3539 8D 59 35			STA LOW
   704 353C AD 5D 35			LDA MINUS
   705 353F 10 15			BPL FMULT
   706 3541 AD 59 35			LDA LOW
   707 3544 49 FF			EOR #$FF
   708 3546 18				CLC 
   709 3547 69 01			ADC #1
   710 3549 8D 59 35			STA LOW
   711 354C AD 5A 35			LDA HIGH
   712 354F 49 FF			EOR #$FF
   713 3551 69 00			ADC #0
   714 3553 8D 5A 35			STA HIGH
   715 3556 68			FMULT 	PLA 
   716 3557 AA				TAX 
   717 3558 60				RTS
   718
   719
   720 = 3559			LOW	.ds 1
   721 = 355A			HIGH	.ds 1
   722 = 355B			MP	.ds 1
   723 = 355C			MC	.ds 1
   724 = 355D			MINUS	.ds 1
   725 					
   726 355E-35C6> 8A		DIV   	TXA 
   727 355F 48				PHA 
   728 3560 98				TYA 
   729 3561 48				PHA 
   730 3562 AD 5A 35			LDA HIGH
   731 3565 4D C7 35			EOR DVSOR
   732 3568 8D 5D 35			STA MINUS
   733 356B AD C7 35			LDA DVSOR
   734 356E 10 08			BPL CKDIV
   735 3570 49 FF			EOR #$FF
   736 3572 18				CLC 
   737 3573 69 01			ADC #1
   738 3575 8D C7 35			STA DVSOR
   739 3578 AD 5A 35		CKDIV 	LDA HIGH
   740 357B 10 15			BPL STDIV
   741 357D AD 59 35			LDA LOW
   742 3580 49 FF			EOR #$FF
   743 3582 18				CLC 
   744 3583 69 01			ADC #1
   745 3585 8D 59 35			STA LOW
   746 3588 AD 5A 35			LDA HIGH
   747 358B 49 FF			EOR #$FF
   748 358D 69 00			ADC #0
   749 358F 8D 5A 35			STA HIGH
   750 3592 A2 08		STDIV 	LDX #8
   751 3594 AD 59 35			LDA LOW
   752 3597 8D C8 35			STA QUOT
   753 359A AD 5A 35			LDA HIGH
   754 359D 0E C8 35		DIVID 	ASL QUOT
   755 35A0 2A				ROL
   756 35A1 CD C7 35			CMP DVSOR
   757 35A4 90 06			BCC CKCNT
   758 35A6 ED C7 35			SBC DVSOR
   759 35A9 EE C8 35			INC QUOT
   760 35AC CA			CKCNT 	DEX 
   761 35AD D0 EE			BNE DIVID
   762 35AF 8D C9 35			STA REMA
   763 35B2 AD 5D 35			LDA MINUS
   764 35B5 10 0B			BPL FDIV
   765 35B7 AD C8 35			LDA QUOT
   766 35BA 49 FF			EOR #$FF
   767 35BC 18				CLC 
   768 35BD 69 01			ADC #1
   769 35BF 8D C8 35			STA QUOT
   770 35C2 68			FDIV 	PLA 
   771 35C3 A8				TAY 
   772 35C4 68				PLA 
   773 35C5 AA				TAX 
   774 35C6 60				RTS
   775 					
   776 = 35C7			DVSOR	.ds 1
   777 = 35C8			QUOT	.ds 1
   778 = 35C9			REMA	.ds 1
   779 				;
   780 				;
   781 35CA				ORG $02E0
   782 02E0-02E1> 00 30			.word START
   783 					
